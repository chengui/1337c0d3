from __future__ import print_function

class Solution(object):
    def palindromePairs(self, words):
        """
        :type words: List[str]
        :rtype: List[List[int]]
        """
        def isPalindrome(str):
            if len(str) <= 1: return True
            return 0 == cmp(str, str[::-1])

        dict_words = dict([(words[i], i) for i in range(len(words))])
        res, flag = list(), "" in dict_words
        for i in xrange(len(words)):
            if len(words[i]) == 0: continue
            if isPalindrome(words[i]):
                if "" in dict_words:
                    res.append([i, dict_words[""]])
                    res.append([dict_words[""], i])
            else:
                rword = words[i][::-1]
                if rword in dict_words: res.append([i, dict_words[rword]])
            for j in xrange(1, len(words[i])):
                substr1, substr2 = words[i][:j], words[i][j:]
                rsubstr1, rsubstr2 = substr1[::-1], substr2[::-1]
                if isPalindrome(substr1) and rsubstr2 in dict_words:
                    res.append([dict_words[rsubstr2], i])
                if isPalindrome(substr2) and rsubstr1 in dict_words:
                    res.append([i, dict_words[rsubstr1]])
        return res

if __name__ == "__main__":
    # words = ["a", ""]
    # words = ["bat", "tab", "cat"]
    # words = ["abcd", "dcba", "lls", "s", "sssll"]
    words = ["gbagiejccfefdja","ecghjehhabihjjdg","ij","diecfdcggfbih","a","bbaggbheggidcjaffdeg","ffeegjf","hicghibjhdggegac","ibfeggda","fjdgdhfie","hadefcabdfgcaagb","hjadfehbahcfbhjjieca","gihhcgdgedhffe","bbcjfccjceejajj","djdj","eebbeafci","icgeahffcedef","ichbc","dffbjhihegghgbff","gdajicijabibcggacch","fecidebdechdaf","ha","ebj","dheeaiihhg","bb","cc","eiehdebiaicedibji","hjeij","c","bi","fdb","aeigac","adgibhegfffdjacfdc","geiieheddbahjdga","hgjjibafjc","fdjbd","ecaigajddbcfhif","dhcdcdhfgbfidfabacei","edegdfcahbhidgchf","aiecebg","dihdebafjhgbagbjdh","dcighgdajdagbb","gaiaag","idghfcfcffehbggdaeb","bdi","dbifhgj","cedeiaiidcdjjjbgeh","bhfhbbbe","ecacidgddggifajidfa","jd","hhbgbcddehbdc","gbgeieb","hgcdfbbfbdbcgb","ijfifbe","bjjhgehihdhahd","dacjcgdabba","ebcdeaediahjifdbgee","degbiice","chjbdbgjjhgiidcehehe","iegdjdgihhhccafdedi","bjj","gcdee","dbcaeiaceaedjbcehjea","fdbjfjdedaceajjjbhf","j","gdcbjhdbiehejidc","ajgib","jheheccjadiedcib","eagejbehjahaj","jgdji","bh","g","abchcebhdhjfjgcc","djihjbfjadjibfjbgcfa","egcjibgjb","bfebabjahgaii","hjecacdd","ahacejicaggccaaaeb","cfggdc","gagheffcghicgia","aggghigfhbgfeh","head","cbggaidah","dgbajfhihediajjb","cihhhgdjij","cdadhjeehiejch","gfdae","ajhcheibijabagej","becdggd","idagidgffic","fdibaaeihaefeagbid","chjiaec","hcjbfdbhbajbcai","egbjhbegjigdicgdjdab","igecajb","ajafhd","efbhghaaieae","dfiacgijif","efdjf","cgfiehjiggafhd","ajahigiijd","eddfechgceifjc","hig","ijcgfbbefcabefbbheca","ahgdhaefaihgbiaf","aicacifajigfhidgfac","ibghfihjbgcd","ecdacaiid","jifihdjehcdedhaebjig","dfgch","ddfdadjddgejjcfefd","aciieececcdf","fgcdjjcigb","hgc","dhcidegafifjgje","ebhbfecfdihbba","bc","fhibbhbhji","gfbh","jhji","dbhgfibgdh","iffgdddefc","jigegibbjiga","iicfiiiiiifcdj","ihdaaf","eggijdb","ggcidccbcgcdjdjhbj","aib","chbiaeaacgehddia","hadehejfgach","icghjhjagheeecafee","ibifdihbjccjac","jjjihbjb","hhhffi","geccedfbghcg","ae","hcgf","acbfcghchahcbjaii","bcgcdifbigcfhfefga","cecihdghfffddjcecidd","hhiicchdbi","fdahfdjbdhceabac","eidihihaddbcc","hcaahghgijdgfcbibhc","eiggdcdch","fifgejbihgcajdffh","bhjjib","fgcejhaehbdbhdgdhib","bgjfhccidbibabf","ijeeaeeeebcfceeif","gahidiehdfgdi","fgigdfgjbhahehaed","iafffcdb","d","cdgh","cchafjghfdaecdffdcgf","aecacedfeigcfghcfdef","jbeidacgh","eacecd","afhbihecce","acfbahfjdgdchijcaai","biig","ehdbhifaiaagi","jdecb","hdjfhggjgcfjdjcd","icahcjbad","e","bifjbifbghdciaidg","jjcbdichegeiejaga","aehhb","caabaejjcfjdhafba","ehfiec","gcjbjfeacccbegedefa","fchggc","jbefahijhhgagcjgdcfe","ifacehcjiaacba","gfae","gjbbagdgbhhddibe","cfjfdga","iafagghbjda","bjeb","gbijeecedf","bgbcfhi","jicac","gded","efgedfbb","idbdajdfcfeijf","gfeiafhae","digbajejb","ihjib","biefdigdidgh","fedecff","iebjigi","ebaijieebhiigbd","hjaciabbhfc","edgbh","gaejdc","gd","aebbcbfehgdc","cbjjigjgia","dchjjicjghdfagdha","aghaggebjbbdj","afhdhj","ecajjbigfgeiejdfgjf","bfcfjhje","ejd","becbccdffhjiha","ahcd","hjgfedcda","acdd","chfiec","fajhfdfhcgj","ac","i","jcbeghfbgjiib","jechhf","idcgadh","dijgdgejigjgjbife","bajcdfjgifcf","ehcccbifhbbci","gggbdfafcjaa","fiijfiffbeeafhidgdh","fjhijj","bifghffcha","cfjd","ibhgf","ifiggeedafjcgbdfbe","bjhagccefjahchdjidh","gchdjdacih","jcgdad","ecegiahjb","dgf","hhejeejjfgd","igiedc","faffaae","hhhdagegjjhadcfdb","djdedaibedhhhad","agjcdbgciadghfg","jhgiachghef","ib","jhaaidgiajbfc","jegcdbhecb","eiabgbieiahegjfdfcha","dgcae","jgdcaehgeffjdhdhd","gjjc","jbbgagji","cdfgbjeeihhejcabih","ahdhahadadje","eeegecddajiiadahbhe","baffhiihfgifhca","cbjgfbbbe","bihgfhfadjgfde","jahhbfdijbfffh","igcgj","cghdcabgehjcie","cghgaiajdj","if","fjbdgidbibhdif","hhbcaa","aabfgeic","ahd","ggfhahfgbjbhhii","abaiiegibg","abajjhadbfgg","fibcgafjibacaegfbhaa","jaagdjaciefgjjdfje","bgeah","diei","gifcfffedcejdhgid","dbi","ahbicbaded","iegdccicigfeajagibj","afg","dgh","cjijdcccaebici","afge","eciih","bfgcdjdfegac","cbfhcbhfbcfiajd","feibbfceedecadaiabb","ccafdfcag","bbbei","jbbhff","fhg","cibcfhejhbhhjhfhbadh","jgadaibddggajjegh","ghahacag","jbjcbbigdjh","dfihbj","cieieciffbdgef","adcgifdcjdejbebi","ccichece","hhaej","ijidfjajjgaeigiea","fd","df","jjfebghacicgadeec","chjdj","jdabejje","cadadjchbbehgfgiecaa","hcddhecbeb","ijjbhai","ggjfdijhfh","ageggjfibgeda","bcgdceggbebbfd","bjbbcbihfj","eeaf","iaic","hhiibebjdbgheihaigff","eeiedaibajgjcfga","gchgfdjiaedfgacdjgad","hjhbiehiig","b","geajijdebcajgfe","ei","idjaefi","id","bhdfdbcd","hggd","ghiigj","aihfdggfadaeiihbb","jbegid","cfigdibdgidg","bajfgbjadadhefgbjh","afac","ff","aideabecjcchbcfhhc","bdcafbaehafhahfde","cgfiheejaidj","bigeejbjgec","dag","giifhbgdgjbhcaaeiife","ijgfcffgadechijj","ieigcdc","egagfdfabihe","fiifbcd","jcccjjfciea","dge","dgeff","dfecjhciahh","cjbdjiegjfcbcfhbfhg","dcecedaeeebegf","hjbhgecb","cjbdefegfebchgc","jeiaefjbicgbdihi","hhcfbiefbbcj","eg","igeghceahe","hh","iighhghicbigaji","ihcadidcbcfgaajahj","igdjd","iebijhjdieffd","cfjdiiaaeichciie","bidigjaebbcacigh","eeahciab","edhjchcdc","gieifhhjejgdajgdigcd","ibehahbigijgcbbehcaj","gde","cccijcadiadbcfccj","hdfbejfefcaeigdehdhj","hbchgdjjd","ihhba","ffjbjeajcfha","adbadbediddah","gcfadicdjdfjddhgjd","chjjajcgfjefh","egchcdeffbbjjhbfgjgj","aahfjd","hdhjaieeidj","iechgceeiah","bichjfbigeha","jjibfgfcejfhjef","hhajabbihdif","fjcbjbbhja","cjejddjbdjfffdga","biaeiehc","edihagfihjdbefhihg","afj","bdhhjjhfjjbdd","bighfgcig","fhbjfaadgdhfibcahi","fidhdiicigchdgcajbc","ibccefcfbccdbebaifb","cdii","feibajadhijfheifbaj","babjhchg","ibhjajjgh","ajfbh","bachehagcgadbichcic","bjgiedhcahaifg","ijahacfe","jcghdcgdjjh","bfhagjcidehgahehbd","egegajidchfdjdgdfcc","f","cd","hijd","eideajaaecb","hjiaefdaeabiehdjede","jdgfcbehibieehdc","jfb","aeiiaifhedgccegbabg","ijihcejf","aejadfbedae","fdjfbcfafjcbf","bejjjcfd","aicabca","fa","ihbef","hjej","gfihebacjfdaei","dcbjcighgjgh","fefhhihcb","dbfgjcabfa","cadhjhhgiffghffgajd","dibhdbbcbah","cidhgegcabfbdibjhef","gb","bificfaeghfcjfg","faadefidbdjcebhg","behfe","ghgdhgjeid","ghjhihdcadffaege","acigfegdcjhgj","dfajaecjdajiihjdc","ajefgebgefahbjbffej","fceia","jihifjchehec","ifcghhhhchcfdad","eegagcjbdhc","jfdijjahefdcihfaf","chdbbfaedhh","cg","cfijhhcbijaacdbi","hc","ceddhbg","ahehcdehdbbciee","geeiaeibfjceajh","jhbefdjgj","cbgb","bgd","bd","bjaafbacedf","jfjcbg","ihjaedfcadbi","ghhaidbghhba","aegdgcj","afeccafcfcaifcf","icheehijijc","cadabegjjj","ddfciaajcabefda","cb","ihgeeh","ajiadfhcacjfdifcib","dchahahcdegcc","hi","aihjfddibcihdh","gdacjbfgde","cfeeidaf","ejehdic","bbcfgighcb","giieiicfcfaa","aai","fgahai","efjiiaiehbjhjafhdhb","edghhjiddecieec","ej","he","hb","ead","hidjghcijb","ibcbf","ifdehfhcajfiebbaj","ace","gbhf","bbihdhhc","hbbafdhcbef","jfcbe","cjebbhaifdbbib","ieeeejjacicjhddcch","chihgddjfga","hfhii","ce","bhi","aidejahh","jahfdehgbagddfjc","ijicebfeeeja","gfffadhedihdaecfbde","efffibiifhbffh","agchjcghjffjceaa","eehafabifjicfb","dgfigibd","bjibgdhiedhgdbgjhce","eijacdjadaigchchfeee","gfdhfchgiedcadcjajih","gjiej","iaibcaebeabddaciba","dbibcegdggihfhfcef","jiffdecbdjejjcgh","cffdbjceabbgfi","gifha","ghiieajjai","cghijdicbjed","adddggafj","iiafejjcggdeeef","beicaaicdhfdhbjj","dccjfaaiiefhh","heihghdgaafhjfac","behidid","jjbhbdeabbagdfcb","ebgaiggafciebaea","bagj","hhdefjdaiiigieaed","dhebhefbhciciecihee","dg","bcbcgagjaijbbdb","ahdajhhcedb","ii","fjgbhjhccjgecjgh","cgdjehhedec","hjdfaaadfbaggd","dfd","cfaeeegiihi","jahegibjabf","icbii","iibj","hdjfbgd","hfaichbdfjhcbfjabc","ibaghgciec","abgjcafbbbg","idjehihcbfhihbdgbi","begachciadfdadbhb","biiaghdigaab","egjfg","bdji","bfdebfba","jdfhfcdjjgdfjahefgij","hfbiedicieccbdjhjdj","jeecejjiijgjdcifd","gibbhicheadcg","bfhjhhfcdcgbhjhbhgef","hadfbgdih","eehhcdej","hchae","eggd","dicg","aafgfhffdedghjajfdh","gcfjhgfcdhgieiibff","hjchbbdgdedfechebge","jceii","bdggccdhhdb","cfehhdcbj","hcbfdfcbdiiaah","bjhgeeccjib","hdaiedigd","eahjifhjd","fcgega","jcbcehcgeebe","ggbgaebfibdejafbaeeb","fcigbhdddbg","eecfhghc","jdbehehjfdijejahbfdf","cja","eiaaagcbjec","cbhcch","jhhagfjji","hgcbbhfgedfaiehgj","hceigehdejdd","cgdhdbiejihic","cgbihcdhgecjjaec","fdahfa","h","ijagaceheie","hbeifcfibffcgj","edfddjb","aaffahhajdeaafajed","jfdfbjiifjeabcjbhj","egcaba","ijie","giaaibag","iabhh","cjeheeafg","fccijfdgdcfhdc","hhhj","bccbhdgejhaggfhgccce","gbj","giffhifehhj","afacd","gchgbidjb","fbjbfdicha","jgh","ibiihciggjd","aaijjgfajifgadbd","cje","jhggafbhehbdhfedia","gcjijhfgfigjhc","igihhdificbj","ef","aeaighghbafjei","jbbehagfcc","jdgbhgbag","jhj","fhibchdcgijfbhabejcc","eiaghab","hggcbechfii","gcjfjfddgehjhehe","efbcaiidaejgccbij","fdecchgedgf","ebhdeifbedffaib","fadeiddecchhejibfhje","gjhfc","cdijhcab","geedadifhchhdibgbech","jjjchdi","hbgecedhjcecic","difffebbhiihihedj","cjgfbjchhceddbbgd","eacgf","gcafbdbibbchbhijcbi","iagjiigdfibccjg","gcaffeeejcbiefjaga","dfjcg","jcaf","cjgce","jj","abegabdeffbj","badfj","jggijgicidbbddhd","adc","bgeajdjbaeja","cabi","ehbagjgebjhhehhjbf","jaabgcbfei","acgehebbc","bgjagc","hjahgeedhieehdjbcjd","ijeabhici","ehgiejdefhdehi","gdedeegfdhdbd","cjjceib","gajfdaigdjdgi","bfdaegbeaehadefg","digaai","jgicbadgebdjifjghg","heaadfghjjadce","bahbedgbjifcechc","hfgag","eeaegca","bacechahejggagfibcia","gdiif","dbhhe","dfehgeaiafbf","dhahcc","chh","ejfbeiggdcaigidhdbdb","agfjcfbeejgibefeaeh","jgghgedceegcbhfagh","efdjdffaiehijfbi","cafggjaedcf","adbihiggjjeeebg","fajicbf","hjjahdbjfggdf","gfdgabhficb","bgejhidib","dihc","ghagdddjbdaegdbihcf","efg","gedfhcgcafcfhajei","dfdchhgfebfjcbdi","fehajg","ajafecgea","gifdfia","ad","ceficegbgaabd","dbbgdjhjdjehae","djbhjiaejbdgaadcbjgi","ifjacjgdedheeb","afcdagacg","gjfbdjbgeaejj","jjdeaca","cgccafhgiegag","edhgbjjffcadhjhc","hfcgeaibabaeedc","bhjaheageef","ggcadhdjbceicji","gbebic","fdjcadcei","eadcc","jgefihheiajfjegebcb","bfijdaeijiebiihj","bgfbfggaebghidbaeij","hbfijfcechdib","jcacf","fbecigeedcbehib","hdeeaafahj","eciiehedaffajeeehgcc","bidiafidhhiehejfg","djadbeaciigehgahachc","gbh","feiegfc","habfaeaibhdbf","hbcgfaecde","faabcidhegi","giafjfbahjca","fefifjcadfji","gaicb","fhcgabjidj","hcdibbdcgfhggi","dfjghdffjejfehccddc","hhhgfaibbj","ediejhggcgadfbifbce","gdbgjhdhdbeggc","gj","jddjadfhh","jhigbbdiej","ageddiiic","jchidcbijcaiaa","biaaijffgdfhhfdcfgb","ejhgb","eabfhbb","jggcacagaafcd","iaedgbgbfccjejhe","gggcj","baahcfbfgcbadecci","acdehbehgdiahecbigjg","cjcdabedjajc","jbfgi","eedejcf","ejciaaib","ifidhaac","habgebdefibhfi","daacbgieijajefaafbh","ffffaeac","cjhdbfghfhefecichac","iiegeghedejbifbbjbaj","cijaajbfff","eb"] 
    s = Solution()
    print(s.palindromePairs(words))
